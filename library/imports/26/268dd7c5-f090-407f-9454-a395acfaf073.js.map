{"version":3,"sources":["../../../../../assets/scripts/serverSimulation/assets/scripts/serverSimulation/map_data_chunk.js"],"names":["util","require","MapDataQuartree","module","exports","x","y","data","parent","map","name","getChunkName","pixelRect","getChunkRect","load","init","quartree","ifEntity","type","DATATYPE","CHUNK","dump","CHUNK_QUARTREE_DEPTH"],"mappings":";;;;;;;;;;AAAA,IAAMA,OAAOC,QAAQ,cAAR,CAAb;AACA,IAAMC,kBAAkBD,QAAQ,qBAAR,CAAxB;;AAEAE,OAAOC,OAAP;AACI,0BAAYC,CAAZ,EAAeC,CAAf,EAAkBC,IAAlB,EAAwBC,MAAxB,EAAgC;AAAA;;AAC5B,aAAKH,CAAL,GAASA,CAAT;AACA,aAAKC,CAAL,GAASA,CAAT;AACA,aAAKG,GAAL,GAAWD,MAAX;AACA,aAAKE,IAAL,GAAYV,KAAKW,YAAL,CAAkBN,CAAlB,EAAqBC,CAArB,CAAZ;AACA,aAAKM,SAAL,GAAiBZ,KAAKa,YAAL,CAAkBR,CAAlB,EAAqBC,CAArB,CAAjB;;AAEA,YAAIC,IAAJ,EAAU;AACN,iBAAKO,IAAL,CAAUP,IAAV;AACH,SAFD,MAEO;AACH,iBAAKQ,IAAL;AACH;AACJ;;AAbL;AAAA;AAAA,6BAeSR,IAfT,EAee;AACP,iBAAKS,QAAL,GAAgB,IAAId,eAAJ,CAAoB,IAApB,EAA0B,IAA1B,EAAgCK,KAAKS,QAArC,EAA+C,IAA/C,EAAqD,KAAKP,GAA1D,CAAhB;AACA,iBAAKO,QAAL,CAAcC,QAAd;AACH;AAlBL;AAAA;AAAA,+BAoBW;AACH,gBAAIV,OAAO,EAAX;;AAEAA,iBAAKF,CAAL,GAAS,KAAKA,CAAd;AACAE,iBAAKD,CAAL,GAAS,KAAKA,CAAd;AACAC,iBAAKK,SAAL,GAAiB,KAAKA,SAAtB;AACAL,iBAAKG,IAAL,GAAY,KAAKA,IAAjB;AACAH,iBAAKW,IAAL,GAAYlB,KAAKmB,QAAL,CAAcC,KAA1B;AACAb,iBAAKS,QAAL,GAAgB,KAAKA,QAAL,CAAcK,IAAd,EAAhB;;AAEA,mBAAOd,IAAP;AACH;AA/BL;AAAA;AAAA,+BAiCW;AACH,iBAAKS,QAAL,GAAgB,IAAId,eAAJ,CAAoBF,KAAKsB,oBAAzB,EAA+C,KAAKV,SAApD,EAA+D,IAA/D,EAAqE,IAArE,EAA2E,KAAKH,GAAhF,CAAhB;AACA,iBAAKO,QAAL,CAAcC,QAAd;AACH;AApCL;;AAAA;AAAA","file":"map_data_chunk.js","sourceRoot":"../../../../../assets/scripts/serverSimulation","sourcesContent":["const util = require(\"../base/util\");\nconst MapDataQuartree = require(\"./map_data_quartree\");\n\nmodule.exports = class MapDataChunk {\n    constructor(x, y, data, parent) {\n        this.x = x;\n        this.y = y;\n        this.map = parent;\n        this.name = util.getChunkName(x, y);\n        this.pixelRect = util.getChunkRect(x, y);\n\n        if (data) {\n            this.load(data);\n        } else {\n            this.init();\n        }\n    }\n\n    load(data) {\n        this.quartree = new MapDataQuartree(null, null, data.quartree, this, this.map);\n        this.quartree.ifEntity();\n    }\n\n    dump() {\n        let data = {};\n\n        data.x = this.x;\n        data.y = this.y;\n        data.pixelRect = this.pixelRect;\n        data.name = this.name;\n        data.type = util.DATATYPE.CHUNK;\n        data.quartree = this.quartree.dump();\n\n        return data;\n    }\n\n    init() {\n        this.quartree = new MapDataQuartree(util.CHUNK_QUARTREE_DEPTH, this.pixelRect ,null, this, this.map);\n        this.quartree.ifEntity();\n    }\n};"]}